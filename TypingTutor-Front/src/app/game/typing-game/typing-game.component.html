<div class="bg-body">
  <div class="typing-game-container">
    <div class="game-section">
      <h2>Loja e shtypjes - Niveli {{ levelNumber }}</h2>  
      <div class="text-to-type">
        <span *ngFor="let char of textToType.split(''); let i = index">
          <span 
            [ngClass]="{
              'correct': userInput[i] === char,
              'incorrect': userInput[i] && userInput[i] !== char,
              'current': i === userInput.length
            }"
          >
            {{ char === ' ' ? '\u00A0' : char }} 
          </span>
        </span>
      </div>  
      <div class="typing-input">
        <input 
          type="text" 
          [(ngModel)]="userInput" 
          (input)="onType($event)" 
          placeholder="Shkruaj këtu..." 
          [disabled]="levelCompleted"
          autofocus 
          *ngIf="!levelCompleted"
        />
      </div>  
      <div class="completion-message">
        <p *ngIf="levelCompleted">Level {{ levelId }} completed!</p>
        <button *ngIf="levelCompleted" (click)="loadNextLevel()">Shko te niveli tjetër</button>
      </div>
      <img id="handImage" src="assets/hints/default.jpg" alt="Hand Position" style="width: 250px; height: 250px;">
    </div>    
    <div class="statistics-section">
      <h3>Statistikat</h3>
      <div class="metrics">
        <p><strong>Vështirësia:</strong> 
          <span [ngStyle]="{'color': getDifficultyColor(difficulty)}">
            {{ getDifficultyText(difficulty) }}
          </span>
        </p>
        <p><strong>Shpejtësia:</strong> {{ speed }} WPM</p>
        <p><strong>Saktësia:</strong> {{ accuracy }}%</p>
        <p><strong>Gabime:</strong> {{ errors }}</p>
        <p><strong>Rezultati:</strong> {{ score }}</p>
        <p><strong>Koha e mbetur:</strong> {{ timer }} sekonda</p>
      </div>
    </div>   
  </div>
</div>
